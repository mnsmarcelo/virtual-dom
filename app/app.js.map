{"version":3,"sources":["../src/app.js"],"names":["h","type","props","children","setBooleanProp","$target","name","value","setAttribute","removeBooleanProp","removeAttribute","isCustomProp","setProp","removeProp","setProps","Object","keys","forEach","updateProp","newVal","oldVal","updateProps","newProps","oldProps","assign","createElement","node","document","createTextNode","$el","map","appendChild","bind","changed","node1","node2","updateElement","$parent","newNode","oldNode","index","removeChild","childNodes","replaceChild","newLength","length","oldLength","i","f","g","window","onload","e","$root","getElementById","$reload","addEventListener"],"mappings":"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","sourcesContent":["function h(type, props, ...children) {\r\n  return { type, props: props || {}, children };\r\n}\r\n\r\nfunction setBooleanProp($target, name, value) {\r\n  if (value) {\r\n    $target.setAttribute(name, value);\r\n    $target[name] = true;\r\n  } else {\r\n    $target[name] = false;\r\n  }\r\n}\r\n\r\nfunction removeBooleanProp($target, name) {\r\n  $target.removeAttribute(name);\r\n  $target[name] = false;\r\n}\r\n\r\nfunction isCustomProp(name) {\r\n  return false;\r\n}\r\n\r\nfunction setProp($target, name, value) {\r\n  if (isCustomProp(name)) {\r\n    return;\r\n  } else if (name === 'className') {\r\n    $target.setAttribute('class', value);\r\n  } else if (typeof value === 'boolean') {\r\n    setBooleanProp($target, name, value);\r\n  } else {\r\n    $target.setAttribute(name, value);\r\n  }\r\n}\r\n\r\nfunction removeProp($target, name, value) {\r\n  if (isCustomProp(name)) {\r\n    return;\r\n  } else if (name === 'className') {\r\n    $target.removeAttribute('class');\r\n  } else if (typeof value === 'boolean') {\r\n    removeBooleanProp($target, name);\r\n  } else {\r\n    $target.removeAttribute(name);\r\n  }\r\n}\r\n\r\nfunction setProps($target, props) {\r\n  Object.keys(props).forEach(name => {\r\n    setProp($target, name, props[name]);\r\n  });\r\n}\r\n\r\nfunction updateProp($target, name, newVal, oldVal) {\r\n  if (!newVal) {\r\n    removeProp($target, name, oldVal);\r\n  } else if (!oldVal || newVal !== oldVal) {\r\n    setProp($target, name, newVal);\r\n  }\r\n}\r\n\r\nfunction updateProps($target, newProps, oldProps = {}) {\r\n  const props = Object.assign({}, newProps, oldProps);\r\n  Object.keys(props).forEach(name => {\r\n    updateProp($target, name, newProps[name], oldProps[name]);\r\n  });\r\n}\r\n\r\nfunction createElement(node) {\r\n  if (typeof node === 'string') {\r\n    return document.createTextNode(node);\r\n  }\r\n  const $el = document.createElement(node.type);\r\n  setProps($el, node.props);\r\n  node.children\r\n    .map(createElement)\r\n    .forEach($el.appendChild.bind($el));\r\n  return $el;\r\n}\r\n\r\nfunction changed(node1, node2) {\r\n  return typeof node1 !== typeof node2 ||\r\n         typeof node1 === 'string' && node1 !== node2 ||\r\n         node1.type !== node2.type\r\n}\r\n\r\nfunction updateElement($parent, newNode, oldNode, index = 0) {\r\n  if (!oldNode) {\r\n    $parent.appendChild(\r\n      createElement(newNode)\r\n    );\r\n  } else if (!newNode) {\r\n    $parent.removeChild(\r\n      $parent.childNodes[index]\r\n    );\r\n  } else if (changed(newNode, oldNode)) {\r\n    $parent.replaceChild(\r\n      createElement(newNode),\r\n      $parent.childNodes[index]\r\n    );\r\n  } else if (newNode.type) {\r\n    updateProps(\r\n      $parent.childNodes[index],\r\n      newNode.props,\r\n      oldNode.props\r\n    );\r\n    const newLength = newNode.children.length;\r\n    const oldLength = oldNode.children.length;\r\n    for (let i = 0; i < newLength || i < oldLength; i++) {\r\n      updateElement(\r\n        $parent.childNodes[index],\r\n        newNode.children[i],\r\n        oldNode.children[i],\r\n        i\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n//JWS\r\n\r\nconst f = (\r\n  <ul style=\"list-style: none;\">\r\n    <li className=\"item\">item 1</li>\r\n    <li className=\"item\">\r\n      <input type=\"checkbox\" checked={true} />\r\n      <input type=\"text\" disabled={false} />\r\n    </li>\r\n  </ul>\r\n);\r\n\r\nconst g = (\r\n  <ul style=\"list-style: none;\">\r\n    <li className=\"item item2\">item 1</li>\r\n    <li style=\"background: red;\">\r\n      <input type=\"checkbox\" checked={false} />\r\n      <input type=\"text\" disabled={true} />\r\n    </li>\r\n  </ul>\r\n);\r\n\r\nwindow.onload = function(e){ \r\n  const $root = document.getElementById('root');\r\n  const $reload = document.getElementById('reload');\r\n\r\n  updateElement($root, f);\r\n  $reload.addEventListener('click', () => {\r\n    updateElement($root, g, f);\r\n  });\r\n};\r\n\r\n\r\n\r\n   \r\n"],"file":"app.js"}